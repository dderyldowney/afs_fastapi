# Local pre-commit configuration to enforce project quality gates and TDD policy.
# Uses local hooks to avoid network dependency and to run in the active Python env.

repos:
  - repo: local
    hooks:
      - id: ruff
        name: Ruff (lint)
        entry: ruff check
        language: system
        types: [python]
      - id: black
        name: Black (format check)
        entry: black
        args: ["--check"]
        language: system
        types: [python]
      - id: isort
        name: isort (imports check)
        entry: isort
        args: ["--check-only"]
        language: system
        types: [python]
      - id: mypy
        name: MyPy (type check)
        entry: mypy
        language: system
        types: [python]

      # Mandatory TDD enforcement (always runs on commit)
      - id: tdd-enforcement
        name: TDD Enforcement
        entry: python .claude/hooks/tdd_enforcement.py
        language: system
        pass_filenames: false
        always_run: true

      # Safety standards validation (ISO 18497 alignment gates)
      - id: safety-validation
        name: Safety Standards Validation
        entry: python .claude/hooks/safety_validation.py
        language: system
        pass_filenames: false
        always_run: true

      # Commit separation of concerns enforcement (mandatory for all commits)
      - id: commit-separation
        name: Commit Separation of Concerns
        entry: python .claude/hooks/commit_separation_enforcement.py
        language: system
        pass_filenames: false
        always_run: true
        stages: [commit-msg]

