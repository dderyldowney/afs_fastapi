# Local pre-commit configuration to enforce project quality gates and TDD policy.
# Uses local hooks to avoid network dependency and to run in the active Python env.

repos:
  - repo: local
    hooks:
      - id: ruff
        name: Ruff (lint)
        entry: ruff check
        language: system
        types: [python]
        files: ^(?!bin/|tmp_).*
        files: ^(?!bin/|tmp_).*
      # - id: isort
      #   name: isort (imports check)
      #   entry: isort
      #   args: ["--check-only"]
      #   language: system
      #   types: [python]
      #   files: ^(?!bin/|tmp_).*
      - id: black
        name: Black (formatting)
        entry: black
        args: ["--check"]
        language: system
        types: [python]
        files: ^(?!bin/|tmp_).*
      - id: mypy
        name: MyPy (type check)
        entry: mypy
        language: system
        types: [python]
        files: ^(?!bin/|tmp_).*
      # - id: pytest
      #   name: Pytest (unit tests)
      #   entry: pytest
      #   language: system
      #   types: [python]
      #   files: ^(?!bin/|tmp_).*
      #   pass_filenames: false
      #   always_run: true

      # Mandatory TDD enforcement (always runs on commit)
      - id: tdd-enforcement
        name: TDD Enforcement
        entry: python .claude/hooks/tdd_enforcement.py
        language: system
        pass_filenames: false
        always_run: true

      # Safety standards validation (ISO 18497 alignment gates)
      - id: safety-validation
        name: Safety Standards Validation
        entry: python .claude/hooks/safety_validation.py
        language: system
        pass_filenames: false
        always_run: true

      - id: doc-update-reminder
        name: Documentation Update Reminder
        entry: bash tools/doc_update_reminder.sh
        language: system
        pass_filenames: false
        always_run: true





