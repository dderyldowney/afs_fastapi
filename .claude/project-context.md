# AFS-FastAPI Project Context

This file contains project analysis for Claude Code to reference across sessions.

## Repository Purpose

The Automated Farming System API (AFS-FastAPI) is a FastAPI-based system designed to automate essential farming processes through Machine Learning and robotics integration. It provides API interfaces for:

1. **Farm Equipment Control** - Operating tractors and other agricultural machinery
2. **Environmental Monitoring** - Tracking soil composition, pH, nutrients, and water quality
3. **Automation Support** - Serving both AI agents and human operators

## Key Components

- **Core API** (`afs_fastapi/api/main.py:43`): FastAPI app with equipment and monitoring endpoints
- **Equipment Module** (`afs_fastapi/equipment/`): `FarmTractor` class with comprehensive tractor simulation including GPS navigation, implement controls, autonomous features
- **Monitoring Module** (`afs_fastapi/monitoring/`): Soil and water quality monitoring with pluggable sensor backends
- **Configuration** (`pyproject.toml`): Python 3.12 project with FastAPI, Pydantic v2, strict typing

## Project Structure

```
afs_fastapi/
├── api/           # FastAPI application and routes
├── equipment/     # Farm equipment classes (tractors, etc.)
├── monitoring/    # Environmental monitoring (soil, water)
├── services/      # Business logic services
├── stations/      # Station management
├── config.py      # Configuration management
├── version.py     # Version information
└── __main__.py    # Application entry point
```

## Execution Methods

1. **Development**: `python -m afs_fastapi` (defaults to 127.0.0.1:8000)
2. **Console Script**: `afs-api` (after pip install)
3. **Environment Configuration**:
   - `AFS_API_HOST`, `AFS_API_PORT`, `AFS_API_RELOAD`, `AFS_API_LOG_LEVEL`, `AFS_CORS_ORIGINS`

## API Endpoints

- `GET /` - Welcome message
- `GET /health` - Health check
- `GET /version` - API version
- `GET /equipment/tractor/{tractor_id}` - Get tractor status
- `GET /monitoring/soil/{sensor_id}` - Get soil readings
- `GET /monitoring/water/{sensor_id}` - Get water quality data

## Architecture

- FastAPI with Pydantic models for API schemas
- Pluggable sensor backends for real hardware integration
- Comprehensive farm equipment modeling (FarmTractor class)
- RESTful endpoints for equipment status and environmental monitoring
- Built-in health checks and versioning
- CORS support via environment configuration

## Development Tools

- **Testing**: pytest with asyncio support
- **Type Checking**: mypy (strict mode) and pyright
- **Code Formatting**: black and ruff
- **Dependencies**: FastAPI, Pydantic v2, Uvicorn
- **Python Version**: 3.12 (strict requirement)

## Key Features

### FarmTractor Class
- Engine and gear controls
- GPS navigation with waypoints
- Implement position management
- Autonomous operation modes
- Hydraulic system controls
- Field operation tracking
- Emergency stop functionality
- Comprehensive diagnostics

### Monitoring System
- Pluggable sensor backends
- Soil composition tracking (pH, moisture, nutrients)
- Water quality monitoring (pH, turbidity, dissolved oxygen)
- Real-time data collection support

## Use Cases

The system is designed as a foundation for ML-driven precision agriculture, supporting:
- Autonomous tractor operations
- Real-time soil and water quality management
- Integration with AI agents for farm automation
- Human oversight of automated systems
- Data collection for machine learning models

---

*Last updated: 2025-09-25*
*Generated by Claude Code repository analysis*
