# pytest Configuration for AFS FastAPI Agricultural Robotics Platform
#
# This configuration ensures consistent test execution across all developers,
# AI agents (Claude, GPT, Gemini, Copilot, CodeWhisperer), and CI/CD pipelines.
#
# Complete Documentation: docs/PYTEST_CONFIGURATION.md

[pytest]
# Minimum pytest version requirement (ensures async testing support)
minversion = 6.0

# Default options applied to all pytest executions
# -ra: Show extra test summary for all results (passed, failed, skipped)
# --strict-markers: Raise errors for undefined markers (prevents typos)
# --import-mode=importlib: Modern Python import strategy
addopts = -ra --strict-markers --import-mode=importlib

# Root directory for test discovery (tests/ directory)
testpaths = tests

# Async fixture loop scope (function-level for safety-critical test isolation)
# Prevents cross-test contamination in multi-tractor coordination scenarios
# See: docs/PYTEST_CONFIGURATION.md for safety rationale
asyncio_default_fixture_loop_scope = function

# Custom test markers for agricultural robotics test organization
markers =
    integration: mark a test as an integration test.
    unit: mark a test as a unit test.
    slow: mark a test as slow.
    serial: mark a test as serial (not to be run in parallel with other tests).